{"version":3,"file":"django-comments-xtd-2.10.4.js","sources":["src/context.js","src/reducer.js","src/lib.js","src/commentform.jsx","src/comment.jsx","src/commentbox.jsx","src/app.jsx","src/index.jsx"],"sourcesContent":["import React from 'react';\n\nexport const StateContext = React.createContext({\n  state: {\n    tree: [],\n    cids: [],\n    newcids: [],\n    counter: 0\n  },\n  dispath: () => {}\n});\n\nexport const init_context_default = {\n  comment_count: 0,\n  allow_comments: false,\n  current_user: \"\",\n  request_name: false,\n  request_email_address: false,\n  is_authenticated: false,\n  who_can_post: \"\",\n  allow_flagging: false,\n  allow_feedback: false,\n  show_feedback: false,\n  can_moderate: false,\n  polling_interval: 2000,\n  feedback_url: \"\",\n  delete_url: \"\",\n  dislike_url: \"\",\n  like_url: \"\",\n  login_url: \"\",\n  reply_url: \"\",\n  flag_url: \"\",\n  list_url: \"\",\n  count_url: \"\",\n  send_url: \"\",\n  preview_url: \"\",\n  default_form: {\n    content_type: \"\",\n    object_pk: \"\",\n    timestamp: \"\",\n    security_hash: \"\"\n  },\n  default_followup: false,\n  html_ud_suffix: \"\",\n  max_thread_level: -1,\n  comment_max_length: 3000,\n}\n\nexport const InitContext = React.createContext(init_context_default);","export function create_tree(cids, data) {\n  const tree = new Array();\n  const corder = new Array();\n  const comments = {};\n  const children = {};\n  let in_cids = new Set();\n  let cur_cids = new Set();\n  let new_cids = new Set();\n\n  function get_children(cid) {\n    return children[cid].map(index => {\n      if (comments[index].children === undefined) {\n        comments[index].children = get_children(index);\n      }\n      return comments[index];\n    });\n  }\n\n  for (const item of data) {\n    in_cids.add(item.id);\n    comments[item.id] = item;\n    if (item.level === 0) {\n      corder.push(item.id);\n    }\n    children[item.id] = [];\n    if (item.parent_id !== item.id) {\n      children[item.parent_id].push(item.id);\n    }\n  }\n\n  for (const id of corder) {\n    comments[id].children = get_children(id);\n    tree.push(comments[id]);\n  }\n\n  if (in_cids.size > 0) {\n    if (cids.size > 0) {\n      for (const id of in_cids) {\n        if (!cids.has(id)) {\n          new_cids.add(id);\n        }\n        cur_cids.add(id);\n      }\n    } else {\n      cur_cids = in_cids;\n      new_cids = new Set();\n    }\n  }\n\n  return {\n    tree,\n    cids: cur_cids,\n    newcids: new_cids,\n    counter: cur_cids.size\n  }\n}\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case 'CREATE_TREE': {\n      return {\n        ...state,\n        ...create_tree(state.cids, action.data)\n      }\n    }\n    case 'UPDATE_COUNTER': {\n      return {\n        ...state,\n        counter: action.counter,\n      }\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","export function getCookie(name) {\n  let value;\n  if (document.cookie && document.cookie !== '') {\n    const all_cookies = document.cookie.split(';');\n    for (const cookie of all_cookies) {\n      const content = cookie.trim();\n      if (content.slice(0, name.length + 1) === (name + '=')) {\n        value = decodeURIComponent(content.slice(name.length + 1));\n        break;\n      }\n    }\n  }\n  return value;\n}\n","import django from 'django';\nimport React, { useContext, useState } from 'react';\nimport { Remarkable } from 'remarkable';\n\nimport { getCookie } from './lib.js';\nimport { InitContext } from './context';\n\n\nexport function FieldIsRequired({replyTo, message}) {\n  return (\n    <span\n      className=\"form-text small invalid-feedback\"\n      {...((replyTo > 0) && {style: {\"fontSize\": \"0.71rem\"}})}\n    >\n      {django.gettext(message)}\n    </span>\n  );\n}\n\n\nexport function PreviewComment({avatar, name, url, comment, replyTo}) {\n  const {\n    is_authenticated,\n    current_user\n  } = useContext(InitContext);\n\n  const get_heading_name = () => {\n    if (url.length > 0)\n      return (<a href={url} target=\"_new\">{name}</a>);\n    else if (is_authenticated)\n      return current_user.split(\":\")[1];\n    else\n      return name;\n  }\n\n  const raw_markup = () => {\n    const md = new Remarkable();\n    const _raw_markup = md.render(comment);\n    return { __html: _raw_markup };\n  }\n\n  return (\n    <div>\n      <hr />\n      {!replyTo && (\n        <h5 className=\"text-center\">\n          {django.gettext(\"Your comment in preview\")}\n        </h5>\n      )}\n      <div className={`comment d-flex ` + ((replyTo > 0) ? \"mt-1\" : \"mt-5\")}>\n        <img className=\"me-3\" src={avatar} height=\"48\" width=\"48\" />\n        <div className=\"d-flex flex-column pb-3\">\n          <span style={{fontSize: \"0.8rem\"}}>\n            {django.gettext(\"Now\")} - {get_heading_name()}  {replyTo > 0 && (\n              <div className=\"badge badge-info\">preview</div>\n            )}</span>\n          <div\n            className=\"content py-2\"\n            dangerouslySetInnerHTML={raw_markup()}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nexport function CommentForm({ replyTo, onCommentCreated }) {\n  const {\n    comment_max_length,\n    default_followup,\n    default_form,\n    is_authenticated,\n    preview_url,\n    request_email_address,\n    request_name,\n    send_url\n  } = useContext(InitContext);\n\n  const [lstate, setLstate] = useState({\n    previewing: false,\n    submitted: false,\n    avatar: undefined, name: \"\", email: \"\", url: \"\", comment: \"\",\n    followup: default_followup,\n    errors: { name: false, email: false, comment: false },\n    alert: { message: \"\", cssc: \"\" },\n    comment_field_error: \"\",\n  });\n\n  const default_error = \"This field is required.\";\n\n  const get_comment_length_error_msg = () => {\n    return (\n      `Ensure this value has at most ${comment_max_length} `\n      + `character (it has ${lstate.comment.length}).`\n    );\n  }\n\n  const handle_input_change = (event) => {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const iname = target.name;\n\n    let comment_field_error = \"\";\n    if (lstate.comment_field_error.length > 0) {\n      comment_field_error = get_comment_length_error_msg();\n    }\n    setLstate({\n      ...lstate,\n      [iname]: value,\n      comment_field_error: comment_field_error\n    });\n  }\n\n  const is_valid_data = () => {\n    let is_valid_name = true, is_valid_email = true, comment_field_error = \"\";\n\n    if (!is_authenticated || request_name)\n      is_valid_name = (/^\\s*$/.test(lstate.name)) ? false : true;\n\n    if (!is_authenticated || request_email_address)\n      is_valid_email = (/\\S+@\\S+\\.\\S+/.test(lstate.email)) ? true : false;\n\n    let is_valid_comment = (/^\\s*$/.test(lstate.comment)) ? false : true;\n    if (lstate.comment.length >= comment_max_length) {\n      is_valid_comment = false;\n      comment_field_error = get_comment_length_error_msg();\n    }\n\n    setLstate({\n      ...lstate,\n      errors: {\n        ...lstate.errors,\n        name: !is_valid_name,\n        email: !is_valid_email,\n        comment: !is_valid_comment,\n      },\n      comment_field_error: comment_field_error\n    });\n\n    return is_valid_name && is_valid_email && is_valid_comment;\n  }\n\n  const handle_submit = (event) => {\n    event.preventDefault();\n    if (!is_valid_data()) {\n      return;\n    }\n\n    const data = {\n      ...default_form,\n      honeypot: '',\n      comment: lstate.comment,\n      name: lstate.name,\n      email: lstate.email,\n      url: lstate.url,\n      followup: lstate.followup,\n      reply_to: replyTo\n    };\n\n    const _promise = fetch(\n      send_url,\n      {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": getCookie(\"csrftoken\")\n        },\n        body: JSON.stringify(data),\n      }\n    );\n    _promise.then(response => {\n      if ([201, 202, 204, 403].includes(response.status)) {\n        let css_class = \"\";\n        const msg_202 = django.gettext(\n          \"Your comment will be reviewed. Thank your for your patience.\");\n        const msg_204 = django.gettext(\n          \"Thank you, a comment confirmation request has been sent by mail.\");\n        const msg_403 = django.gettext(\n          \"Sorry, your comment has been rejected.\");\n        const message = {\n          202: msg_202,\n          204: msg_204,\n          403: msg_403\n        };\n\n\n        const cssc = (replyTo > 0 ? \"mb-0 \" : \"\") + \"small alert alert-\";\n        css_class = (response.status == 403) ? cssc + \"danger\" : cssc + \"info\";\n\n        const _errors = response.status < 300\n          ? { name: false, email: false, comment: false }\n          : { ...lstate.errors };\n\n        setLstate({\n          ...lstate,\n          alert: {\n            message: message[response.status],\n            cssc: css_class\n          },\n          previewing: false,\n          submitted: true,\n          name: '', email: '', url: '', followup: false, comment: '',\n          errors: _errors\n        });\n\n        onCommentCreated();\n      }\n    })\n  }\n\n  const handle_preview = (event) => {\n    event.preventDefault();\n    if (!is_valid_data())\n      return;\n\n    const _promise = fetch(\n      preview_url,\n      {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": getCookie(\"csrftoken\")\n        },\n        body: JSON.stringify({ email: lstate.email }),\n      }\n    );\n    _promise.then(response => {\n      if (response.status === 200)\n        return response.json();\n      else throw new Error(`Status ${response.status}`);\n    }).then(data => {\n      setLstate({\n        ...lstate,\n        avatar: data.url,\n        previewing: true\n      });\n    }).catch(error => console.error(error));\n  }\n\n  const get_field_css_classes = (field) => {\n    let css_classes = \"row justify-content-center form-group\";\n    if (field === \"followup\")\n      css_classes += \" my-3\";\n    else\n      css_classes += (replyTo > 0) ? \" my-2\" : \" my-3\";\n\n    if (   (field === \"name\" && lstate.errors.name)\n        || (field === \"email\" && lstate.errors.email)\n        || (field === \"comment\" && lstate.errors.comment)\n    ) {\n      css_classes += \" has-danger\";\n    }\n\n    return css_classes;\n  }\n\n  const get_input_css_classes = (field) => {\n    let css_classes = \"form-control\";\n    css_classes += (replyTo > 0) ? \" form-control-sm\" : \"\";\n\n    if (   (field === \"name\" && lstate.errors.name)\n        || (field === \"email\" && lstate.errors.email)\n        || (field === \"comment\" && lstate.errors.comment)\n    ) {\n      css_classes += \" is-invalid\";\n    }\n\n    return css_classes;\n  }\n\n  const render_comment_field = () => {\n    return (\n      <div className={get_field_css_classes(\"comment\")}>\n        <div className={(replyTo > 0) ? \"col-12\" : \"col-10\"}>\n          <textarea\n            required name=\"comment\" id=\"id_comment\"\n            value={lstate.comment}\n            placeholder={django.gettext(\"Your comment\")}\n            className={get_input_css_classes(\"comment\")}\n            onChange={handle_input_change}\n          />\n          {lstate.errors.comment && (\n            <FieldIsRequired\n              replyTo={replyTo}\n              message={lstate.comment_field_error || default_error}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  const render_name_field = () => {\n    if (is_authenticated && !request_name)\n      return <></>;\n\n    return (\n      <div className={get_field_css_classes(\"name\")}>\n        <div className=\"col-2 text-end\">\n          <label\n            htmlFor=\"id_name\"\n            className={\n              (replyTo > 0) ? \"form-control-sm\" : \"col-form-label\"\n            }\n          >{django.gettext(\"Name\")}</label>\n        </div>\n        <div className={(replyTo > 0) ? \"col-9\" : \"col-7\"}>\n          <input\n            required type=\"text\" name=\"name\" id=\"id_name\"\n            value={lstate.name} placeholder={django.gettext('name')}\n            onChange={handle_input_change}\n            className={get_input_css_classes(\"name\")}\n          />\n          {lstate.errors.name && (\n            <FieldIsRequired\n              replyTo={replyTo}\n              message=\"This field is required.\"\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  const render_email_field = () => {\n    if (is_authenticated && !request_email_address)\n      return <></>;\n\n    let help_cssc = \"form-text small\";\n    help_cssc += lstate.errors.email ? \" invalid-feedback\" : \"\";\n\n    return (\n      <div className={get_field_css_classes(\"email\")}>\n        <div className=\"col-2 text-end\">\n          <label\n            htmlFor=\"id_name\"\n            className={\n              (replyTo > 0) ? \"form-control-sm\" : \"col-form-label\"\n            }\n          >{django.gettext(\"Mail\")}</label>\n        </div>\n        <div className={(replyTo > 0) ? \"col-9\" : \"col-7\"}>\n          <input\n            required type=\"text\" name=\"email\" id=\"id_email\"\n            value={lstate.email} placeholder={django.gettext('mail address')}\n            onChange={handle_input_change}\n            className={get_input_css_classes(\"email\")}\n          />\n          <span\n            className={help_cssc}\n            {...((replyTo > 0) && {style: {\"fontSize\": \"0.71rem\"}})}\n          >\n            {django.gettext('Required for comment verification.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  const render_url_field = () => {\n    if (is_authenticated)\n      return <></>;\n\n    return (\n      <div className={get_field_css_classes(\"url\")}>\n        <div className=\"col-2 text-end\">\n          <label\n            htmlFor=\"id_url\"\n            className={\n              (replyTo > 0) ? \"form-control-sm\" : \"col-form-label\"\n            }\n          >{django.gettext(\"Link\")}</label>\n        </div>\n        <div className={(replyTo > 0) ? \"col-9\" : \"col-7\"}>\n          <input\n            type=\"text\" name=\"url\" id=\"id_url\"\n            value={lstate.url}\n            placeholder={django.gettext(\"url your name links to (optional)\")}\n            onChange={handle_input_change}\n            className={get_input_css_classes(\"url\")}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  const render_followup_field = () => {\n    const elem_id = (replyTo > 0) ? `_${replyTo}` : \"id_followup\";\n    const cssc = \"form-check d-flex justify-content-center align-items-center\";\n\n    return (\n      <div className={get_field_css_classes(\"followup\")}>\n        <div className={(replyTo > 0) ? \"col-10\" : \"col-7\"}>\n          <div className={cssc}>\n            <input\n              name=\"followup\" type=\"checkbox\"\n              id={elem_id}\n              onChange={handle_input_change}\n              className=\"form-check-input\"\n              checked={lstate.followup}\n            />\n            <label\n              htmlFor={elem_id}\n              className={\"ps-2 form-check-label\" + (replyTo > 0 && \" small\")}\n            >\n              &nbsp;{django.gettext(\"Notify me about follow-up comments\")}\n            </label>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {lstate.previewing && (\n        <PreviewComment\n          avatar={lstate.avatar}\n          name={lstate.name}\n          url={lstate.url}\n          comment={lstate.comment}\n          replyTo={replyTo}\n        />\n      )}\n      <div className={(replyTo === 0) ? \"card mt-4 mb-5\" : \"card mt-2\"}>\n        <div className=\"card-body\">\n          {(replyTo === 0) && (\n            <h4 className=\"card-title text-center pb-3\">\n              {django.gettext(\"Post your comment\")}\n            </h4>\n          )}\n          {(lstate.alert.message && lstate.alert.message.length > 0) && (\n            <div className={lstate.alert.cssc}>{lstate.alert.message}</div>\n          )}\n          {(!lstate.submitted || replyTo === 0) && (\n            <form method=\"POST\" onSubmit={handle_submit}>\n              <fieldset>\n                <input type=\"hidden\" name=\"content_type\"\n                  defaultValue={default_form.content_type} />\n                <input type=\"hidden\" name=\"object_pk\"\n                  defaultValue={default_form.object_pk} />\n                <input type=\"hidden\" name=\"timestamp\"\n                  defaultValue={default_form.timestamp} />\n                <input type=\"hidden\" name=\"security_hash\"\n                  defaultValue={default_form.security_hash} />\n                <input type=\"hidden\" name=\"reply_to\"\n                  defaultValue={replyTo} />\n                <div style={{display:'none'}}>\n                  <input type=\"text\" name=\"honeypot\" defaultValue=\"\" />\n                </div>\n                {render_comment_field()}\n                {render_name_field()}\n                {render_email_field()}\n                {render_url_field()}\n                {render_followup_field()}\n              </fieldset>\n              <div\n                className={\n                  \"row my-2 form-group\" + (replyTo > 0 ? \" mb-0\" : \"\")\n                }\n              >\n                <div className=\"d-flex justify-content-center\">\n                  <button\n                    type=\"submit\"\n                    name=\"post\"\n                    className={\n                      \"btn btn-primary me-1\" + (replyTo > 0 ? \" btn-sm\" : \"\")\n                    }\n                  >{django.gettext(\"send\")}</button>\n                  <button\n                    name=\"preview\"\n                    className={\n                      \"btn btn-secondary\" + (replyTo > 0 ? \" btn-sm\" : \"\")\n                    }\n                    onClick={handle_preview}\n                  >{django.gettext(\"preview\")}</button>\n                </div>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import django from 'django';\nimport React, { useContext, useEffect, useMemo, useState } from 'react';\nimport { Remarkable } from 'remarkable';\n\nimport { getCookie } from './lib.js';\nimport { InitContext, StateContext } from './context.js';\nimport { CommentForm } from './commentform.jsx';\n\n\n// --------------------------------------------------------------------\nexport function UserPart({\n  userName, userUrl, isRemoved, userModerator\n}) {\n  const user = useMemo(() => {\n    return (userUrl && !isRemoved)\n      ? <a\n        href={userUrl}\n        className=\"text-decoration-none\"\n        title=\"User's link\">{userName}</a>\n      : userName;\n  }, [userUrl, isRemoved]);\n\n  const moderator = useMemo(() => {\n    if (userModerator) {\n      const label = django.gettext(\"moderator\");\n      return (\n        <span>&nbsp;\n          <span className=\"badge text-bg-secondary\">{label}</span>\n        </span>\n      );\n    } else\n      return <></>;\n  }, [userModerator]);\n\n  return (<span>{user}{moderator}</span>);\n}\n\n// --------------------------------------------------------------------\n// The TopRightPart displays:\n//  * The \"flag this comment\" link, and\n//  * The \"remove this comment\" link.\n\nexport function TopRightPart({\n  allowFlagging,\n  canModerate,\n  commentId,\n  deleteUrl,\n  flagUrl,\n  isAuthenticated,\n  isRemoved,\n  loginUrl,\n  userRequestedRemoval,\n  removalCount,\n}) {\n  const flagging_count = useMemo(() => {\n    if (isAuthenticated && canModerate && removalCount > 0) {\n      const fmts = django.ngettext(\n        \"%s user has flagged this comment as inappropriate.\",\n        \"%s users have flagged this comment as inappropriate.\",\n        removalCount\n      );\n      const text = django.interpolate(fmts, [removalCount]);\n      return (\n        <span className=\"small text-danger\" title={text}>{removalCount}</span>\n      );\n    } else {\n      return <></>;\n    }\n  }, [isAuthenticated, canModerate, removalCount]);\n\n  const flagging_html = useMemo(() => {\n    if (!allowFlagging)\n      return <></>;\n\n    let inapp_msg = \"\";\n    if (userRequestedRemoval) {\n      inapp_msg = django.gettext(\"I flagged it as inappropriate\");\n      return (\n        <>\n          {flagging_count}&nbsp;\n          <i className=\"bi bi-flag text-danger\" title={inapp_msg}></i>\n        </>\n      );\n    } else {\n      const url = (isAuthenticated)\n        ? flagUrl.replace('0', commentId)\n        : loginUrl + \"?next=\" + flagUrl.replace('0', commentId);\n      inapp_msg = django.gettext(\"flag comment as inappropriate\");\n      return (\n        <>\n          {flagging_count}&nbsp;\n          <a className=\"text-decoration-none\" href={url}>\n            <i className=\"bi bi-flag\" title={inapp_msg}></i>\n          </a>\n        </>\n      );\n    }\n  }, [allowFlagging, userRequestedRemoval]);\n\n  const moderate_html = useMemo(() => {\n    if (isAuthenticated && canModerate) {\n      const remove_msg = django.gettext(\"remove comment\");\n      const url = deleteUrl.replace('0', commentId);\n      return (\n        <a className=\"text-decoration-none\" href={url}>\n          <i className=\"bi bi-trash\" title={remove_msg}></i>\n        </a>\n      );\n    } else {\n      return <></>;\n    }\n  }, [isAuthenticated, canModerate]);\n\n  if (isRemoved)\n    return <></>;\n\n  return (\n    <div className=\"d-inline\">{flagging_html} {moderate_html}</div>\n  )\n}\n\n\n// --------------------------------------------------------------------\n// The FeedbackPart displays:\n//  * The \"flag this comment\" link, and\n//  * The \"remove this comment\" link.\n\nexport function FeedbackPart({\n  allowFeedback,\n  commentId,\n  currentUser,\n  onLikeClicked,\n  onDislikeClicked,\n  showFeedback,\n  userLikeList,\n  userDislikeList\n}) {\n  const cur_user_id = currentUser.split(\":\")[0];\n\n  const get_user_list = (dir) => {\n    return (dir === \"like\")\n      ? userLikeList\n      : userDislikeList;\n  }\n\n  const get_feedback_chunk = (dir) => {\n    if (!allowFeedback)\n      return <></>;\n\n    const user_list = [...get_user_list(dir)];\n    const userids = new Set(user_list.map(item => item.split(\":\")[0]));\n    const usernames = user_list.map(item => item.split(\":\")[1]);\n\n    const click_hdl = dir == 'like' ? onLikeClicked : onDislikeClicked;\n    let icon = (dir == 'like') ? 'hand-thumbs-up' : 'hand-thumbs-down';\n    icon += userids.has(cur_user_id) ? '-fill' : '';\n    const class_icon = \"bi bi-\"+icon;\n    const title = (dir == 'like')\n      ? django.gettext('I like it')\n      : django.gettext('I dislike it');\n\n\n    return (\n      <>\n        {showFeedback && (user_list.length > 0) && (\n          <a\n            className=\"small text-decoration-none\"\n            data-bs-html=\"true\"\n            data-bs-toggle=\"tooltip\"\n            data-bs-title={usernames.join(\"<br/>\")}\n            role=\"button\"\n          >{user_list.length}</a>\n        )}\n        <a href=\"#\" onClick={click_hdl}>\n          <i className={class_icon} title={title}></i>\n        </a>\n      </>\n    );\n  }\n\n  const likeFeedback = get_feedback_chunk(\"like\");\n  const dislikeFeedback = get_feedback_chunk(\"dislike\");\n\n  return (allowFeedback\n    ? (\n      <div id={`feedback-${commentId}`} className=\"d-inline small\">\n        {likeFeedback}\n        &nbsp;<span className=\"text-muted\">&sdot;</span>&nbsp;\n        {dislikeFeedback}\n      </div>\n    )\n    : <></>\n  );\n}\n\n\n// --------------------------------------------------------------------\n// The ReplyFormPart displays:\n//  * The \"reply\" link. (it can be precedeed with a &bull;)\n//  * The \"reply\" form.\n\nexport function ReplyFormPart({\n  allowFeedback,\n  commentId,\n  level,\n  maxThreadLevel,\n  onCommentCreated,\n  onReplyClick,\n  replyFormVisible,\n  replyUrl,\n}) {\n  const url = replyUrl.replace('0', commentId);\n  const label = django.gettext(\"Reply\");\n\n  if (level >= maxThreadLevel)\n    return <></>;\n\n  return (\n    <>\n      {allowFeedback\n        ? (\n          <span>\n            &nbsp;&nbsp;<span className=\"text-muted\">&bull;</span>&nbsp;&nbsp;\n            <a\n              className=\"small text-decoration-none\"\n              onClick={onReplyClick}\n              href={url}\n            >{label}</a>\n          </span>\n        )\n        : (\n          <a\n            className=\"small text-decoration-none\"\n            onClick={onReplyClick}\n            href={url}\n          >{label}</a>\n        )\n      }\n      {replyFormVisible\n        ? (\n          <CommentForm\n            replyTo={commentId}\n            onCommentCreated={onCommentCreated}\n          />\n        )\n        : <></>\n      }\n    </>\n  );\n}\n\n// --------------------------------------------------------------------\n// The CommentBodyPart component.\n\nexport function CommentBodyPart({ allowFeedback, comment, isRemoved }) {\n  const rawMarkup = useMemo(() => {\n    const md = new Remarkable();\n    const _markup = md.render(comment);\n    return { __html: _markup };\n  }, [comment]);\n\n  const extra_space = (allowFeedback) ? \"py-1\" : \"pt-1 pb-3\";\n\n  if (isRemoved) {\n    const cls = `text-muted ${extra_space}`;\n    return <p className={cls}><em>{comment}</em></p>;\n  } else {\n    const cls = `content ${extra_space}`;\n    return <div className={cls} dangerouslySetInnerHTML={rawMarkup}/>;\n  }\n}\n\n// --------------------------------------------------------------------\nexport function reduce_flags(data, current_user) {\n  const result = {\n    like: [],\n    dislike: [],\n    removal: { is_active: false, count: 0 }\n  }\n  for (const item of data) {\n    const user = [item.id, item.user].join(\":\");\n    switch (item.flag) {\n      case \"like\": {\n        result.like.push(user);\n        break;\n      }\n      case \"dislike\": {\n        result.dislike.push(user);\n        break;\n      }\n      case \"removal\": {\n        result.removal.count += 1;\n        result.removal.is_active = user === current_user ? true : false;\n        break;\n      }\n    }\n  }\n  return result;\n}\n\n\nexport function Comment(props) {\n  const { data } = props;\n  const {\n    allow_feedback,\n    allow_flagging,\n    can_moderate,\n    current_user,\n    delete_url,\n    dislike_url,\n    feedback_url,\n    flag_url,\n    is_authenticated,\n    like_url,\n    login_url,\n    max_thread_level,\n    reply_url,\n    show_feedback,\n    who_can_post\n  } = useContext(InitContext);\n\n  const { state } = useContext(StateContext);\n  const { newcids } = state;\n\n  const _flags = reduce_flags(data.flags, current_user);\n\n  const [lstate, setLstate] = useState({\n    current_user: current_user,\n    removal: _flags.removal.is_active,\n    removal_count: _flags.removal.count,\n    like_users: _flags.like,\n    dislike_users: _flags.dislike,\n    is_reply_form_visible: false\n  });\n\n  const handle_comment_created = () => {\n    props.onCommentCreated();\n    if (is_authenticated) {\n      setLstate({ ...lstate, is_reply_form_visible: false });\n    }\n  }\n\n  const handle_reply_click = (event) => {\n    event.preventDefault();\n\n    if (who_can_post === 'users' && !is_authenticated) {\n      return window.location.href = (\n        `${login_url}?next=${reply_url.replace('0', data.id)}`\n      );\n    }\n\n    setLstate({\n      ...lstate,\n      is_reply_form_visible: !lstate.is_reply_form_visible\n    });\n  }\n\n  const post_feedback = (flag) => {\n    const _promise = fetch(\n      feedback_url,\n      {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRFToken\": getCookie(\"csrftoken\")\n        },\n        body: JSON.stringify({ comment: data.id, flag: flag }),\n      }\n    );\n    _promise.then(response => {\n      const _like_users = new Set(lstate.like_users);\n      const _dislike_users = new Set(lstate.dislike_users);\n      switch (response.status) {\n        case 201: {\n          if (flag == 'like') {\n            _like_users.add(current_user);\n            _dislike_users.delete(current_user);\n          } else if (flag == 'dislike') {\n            _like_users.delete(current_user);\n            _dislike_users.add(current_user);\n          }\n          setLstate({\n            ...lstate,\n            like_users: [..._like_users],\n            dislike_users: [..._dislike_users]\n          });\n          break;\n        }\n        case 204: {\n          if (flag == 'like') {\n            _like_users.delete(current_user);\n          } else if (flag == 'dislike') {\n            _dislike_users.delete(current_user);\n          }\n          setLstate({\n            ...lstate,\n            like_users: [..._like_users],\n            dislike_users: [..._dislike_users]\n          });\n          break;\n        }\n        case 400: {\n          response.json().then(data => {\n            console.error(data);\n          });\n          break;\n        }\n      }\n    });\n  }\n\n  const action_like = (event) => {\n    event.preventDefault();\n    if (is_authenticated) {\n      return post_feedback('like');\n\n    }\n    const redirect = `${login_url}?next=${like_url.replace('0', data.id)}`;\n    return window.location.href = redirect;\n  }\n\n  const action_dislike = (event) => {\n    event.preventDefault();\n    if (is_authenticated) {\n      return post_feedback('dislike');\n    }\n\n    const redirect = `${login_url}?next=${dislike_url.replace('0', data.id)}`;\n    return window.location.href = redirect;\n  }\n\n  useEffect(() => {\n    const qs_tooltip = '[data-bs-toggle=\"tooltip\"]';\n    const tooltipTriggerList = document.querySelectorAll(qs_tooltip);\n    [...tooltipTriggerList].map(\n      tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl)\n    );\n  }, [lstate]);\n\n  return (\n    <div id={`c${data.id}`} className=\"comment d-flex\">\n      <img src={data.user_avatar} className=\"me-3\" height=\"48\" width=\"48\" />\n      <div className=\"d-flex flex-column flex-grow-1 pb-3\">\n        <h6\n          className=\"comment-header mb-1 d-flex justify-content-between\"\n          style={{ fontSize: \"0.8rem\"}}\n        >\n          <div className=\"d-inline flex-grow-1\">\n            {newcids.has(data.id) && (\n              <span>\n                <span className=\"badge text-bg-success\">new</span>&nbsp;-&nbsp;\n              </span>\n            )}\n            {data.submit_date}&nbsp;-&nbsp;\n            <UserPart\n              userName={data.user_name}\n              userUrl={data.user_url}\n              isRemoved={data.is_removed}\n              userModerator={data.user_moderator}\n            />\n            &nbsp;&nbsp;\n            <a\n              className=\"permalink text-decoration-none\"\n              title={django.gettext(\"comment permalink\")}\n              href={data.permalink}\n            >¶</a>\n          </div>\n          <TopRightPart\n            allowFlagging={allow_flagging}\n            canModerate={can_moderate}\n            commentId={data.id}\n            deleteUrl={delete_url}\n            flagUrl={flag_url}\n            isAuthenticated={is_authenticated}\n            isRemoved={data.is_removed}\n            loginUrl={login_url}\n            userRequestedRemoval={lstate.removal}\n            removalCount={lstate.removal_count}\n          />\n        </h6>\n        <CommentBodyPart\n          allowFeedback={allow_feedback}\n          comment={data.comment}\n          isRemoved={data.is_removed}\n        />\n        {!data.is_removed && (\n          <div>\n            <FeedbackPart\n              allowFeedback={allow_feedback}\n              commentId={data.id}\n              currentUser={current_user}\n              onLikeClicked={action_like}\n              onDislikeClicked={action_dislike}\n              showFeedback={show_feedback}\n              userLikeList={lstate.like_users}\n              userDislikeList={lstate.dislike_users}\n            />\n            <ReplyFormPart\n              allowFeedback={allow_feedback}\n              commentId={data.id}\n              level={data.level}\n              maxThreadLevel={max_thread_level}\n              onCommentCreated={handle_comment_created}\n              onReplyClick={handle_reply_click}\n              replyFormVisible={lstate.is_reply_form_visible}\n              replyUrl={reply_url}\n            />\n          </div>\n        )}\n        {(data.children.length > 0) && (\n          <div className=\"pt-3\">\n            {data.children?.map((item) => (\n              <Comment\n                key={item.id}\n                data={item}\n                onCommentCreated={props.onCommentCreated}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import django from 'django';\nimport React, { useContext, useEffect, useMemo } from 'react';\n\nimport { InitContext, StateContext } from './context';\nimport { Comment } from './comment.jsx';\nimport { CommentForm } from './commentform.jsx';\n\n\nfunction CommentCounter({counter}) {\n  const text = useMemo(() => {\n    const fmts = django.ngettext(\"%s comment.\", \"%s comments.\", counter);\n    return django.interpolate(fmts, [counter]);\n  }, [counter]);\n\n  return (counter > 0)\n    ? <h5 className=\"text-center\">{text}</h5>\n    : <></>;\n}\n\n\nfunction CommentFormWrapper({replyTo, onCommentCreated}) {\n  const {\n    allow_comments,\n    who_can_post,\n    is_authenticated,\n    html_id_suffix,\n  } = useContext(InitContext);\n\n  if (allow_comments) {\n    if (who_can_post === 'all' ||\n      (who_can_post === 'users' && is_authenticated)\n    ) {\n      return (\n        <CommentForm replyTo={replyTo} onCommentCreated={onCommentCreated} />\n      );\n    }\n\n    const _id = `only-users-can-post-${html_id_suffix}`;\n    const elem = document.getElementById(_id);\n\n    return (elem)\n      ? <div dangerouslySetInnerHTML={{__html: elem.innerHTML}} />\n      : (\n        <h5 className=\"mt-4 mb-5 text-center text-info\">\n          {django.gettext(\"Only registered users can post comments.\")}\n        </h5>\n      );\n  }\n\n  return (\n    <h4 className=\"mt-4 mb-5 text-center text-secondary\">\n      {django.gettext(\"Comments are disabled for this article.\")}\n    </h4>\n  );\n}\n\n\nfunction UpdateAlert({counter, cids, onClick }) {\n  const diff = counter - cids.size;\n\n  if (diff > 0) {\n    const fmts = django.ngettext(\n      \"There is %s new comment.\", \"There are %s new comments.\", diff);\n    const message = django.interpolate(fmts, [diff]);\n\n    return (\n      <div\n        className={(`alert alert-info` +\n                   ` d-flex justify-content-between align-items-center`)}>\n        <p className=\"mb-0\">{message}</p>\n        <button\n          type=\"button\" className=\"btn btn-secondary btn-xs\"\n          onClick={() => onClick()}>update</button>\n      </div>\n    );\n  } else return <></>;\n}\n\n\nexport function CommentBox() {\n  const { count_url, list_url, polling_interval } = useContext(InitContext);\n  const { state, dispatch } = useContext(StateContext);\n  const { counter, cids, tree } = state;\n\n  const load_comments = () => {\n    const _promise = fetch(list_url);\n    _promise.then(response => {\n      return response.json();\n    }).then(data => {\n      dispatch({ type: 'CREATE_TREE', data });\n    }).catch(error => console.error(error));\n  }\n\n  const load_count = () => {\n    const _promise = fetch(count_url);\n    _promise.then(response => {\n      return response.json();\n    }).then(data => {\n      dispatch({ type: 'UPDATE_COUNTER', counter: data.count });\n    }).catch(error => console.error(error));\n  }\n\n  useEffect(() => {\n    if (polling_interval > 0) {\n      setInterval(load_count, polling_interval);\n    }\n    load_comments();\n  }, [polling_interval]);\n\n  return (\n    <div>\n      <CommentCounter counter={counter} />\n      <CommentFormWrapper replyTo={0} onCommentCreated={load_comments} />\n      <UpdateAlert\n        counter={counter} cids={cids} onClick={load_comments}\n      />\n      <div className=\"comment-tree\">\n        {tree.map(item => (\n          <Comment\n            key={item.id} data={item} onCommentCreated={load_comments}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import React, { useReducer } from 'react';\n\nimport { InitContext, StateContext } from './context.js';\nimport { reducer } from './reducer.js';\nimport { CommentBox } from './commentbox.jsx';\n\n/*\n * props is an object containing all the attributes sent\n * by the get_commentbox_props templatetag (a django-comments-xtd tag).\n * It happens to be the output of the function commentbox_props, in the\n * module django_comments_xtd/frontend.py.\n * Here in JavaScript the structure of the props matches the\n * InitContext, in the context.js module.\n */\n\nexport function App(props) {\n  const initial_state = {\n    tree: [],\n    cids: new Set(),\n    newcids: new Set(),\n    counter: props.comment_count\n  }\n  const [ state, dispatch ] = useReducer(reducer, initial_state);\n\n  return (\n    <StateContext.Provider value={{ state, dispatch }}>\n      <InitContext.Provider value={props}>\n        <CommentBox />\n      </InitContext.Provider>\n    </StateContext.Provider>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { App } from './app.jsx';\n\nconst rootElement = document.getElementById('comments');\nif (!rootElement)\n  throw new Error('Failed to find the element with id=\"comments\".');\n\nReactDOM.createRoot(rootElement).render(\n  <React.StrictMode>\n    <App {...{...window.comments_props, ...window.comments_props_override }} />\n  </React.StrictMode>\n);\n"],"names":["StateContext","React","createContext","state","tree","cids","newcids","counter","dispath","init_context_default","comment_count","allow_comments","current_user","request_name","request_email_address","is_authenticated","who_can_post","allow_flagging","allow_feedback","show_feedback","can_moderate","polling_interval","feedback_url","delete_url","dislike_url","like_url","login_url","reply_url","flag_url","list_url","count_url","send_url","preview_url","default_form","content_type","object_pk","timestamp","security_hash","default_followup","html_ud_suffix","max_thread_level","comment_max_length","InitContext","create_tree","data","Array","corder","comments","children","in_cids","Set","cur_cids","new_cids","get_children","cid","map","index","undefined","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","value","add","id","level","push","parent_id","err","e","f","_i","_corder","length","size","_iterator2","_step2","has","reducer","action","type","_objectSpread","getCookie","name","document","cookie","all_cookies","split","content","trim","slice","decodeURIComponent","FieldIsRequired","_ref","replyTo","message","createElement","_extends","className","style","django","gettext","PreviewComment","_ref2","avatar","url","comment","_useContext","useContext","get_heading_name","href","target","raw_markup","md","Remarkable","_raw_markup","render","__html","src","height","width","fontSize","dangerouslySetInnerHTML","CommentForm","_ref3","onCommentCreated","_useContext2","_useState","useState","previewing","submitted","email","followup","errors","alert","cssc","comment_field_error","_useState2","_slicedToArray","lstate","setLstate","default_error","get_comment_length_error_msg","concat","handle_input_change","event","checked","iname","_defineProperty","is_valid_data","is_valid_name","is_valid_email","test","is_valid_comment","handle_submit","preventDefault","honeypot","reply_to","_promise","fetch","method","mode","headers","body","JSON","stringify","then","response","includes","status","css_class","msg_202","msg_204","msg_403","_errors","handle_preview","json","Error","error","console","get_field_css_classes","field","css_classes","get_input_css_classes","render_comment_field","required","placeholder","onChange","render_name_field","Fragment","htmlFor","render_email_field","help_cssc","render_url_field","render_followup_field","elem_id","onSubmit","defaultValue","display","onClick","UserPart","userName","userUrl","isRemoved","userModerator","user","useMemo","title","moderator","label","TopRightPart","allowFlagging","canModerate","commentId","deleteUrl","flagUrl","isAuthenticated","loginUrl","userRequestedRemoval","removalCount","flagging_count","fmts","ngettext","text","interpolate","flagging_html","inapp_msg","replace","moderate_html","remove_msg","FeedbackPart","allowFeedback","currentUser","onLikeClicked","onDislikeClicked","showFeedback","userLikeList","userDislikeList","cur_user_id","get_user_list","dir","get_feedback_chunk","user_list","_toConsumableArray","userids","usernames","click_hdl","icon","class_icon","join","role","likeFeedback","dislikeFeedback","ReplyFormPart","_ref4","maxThreadLevel","onReplyClick","replyFormVisible","replyUrl","CommentBodyPart","_ref5","rawMarkup","_markup","extra_space","cls","reduce_flags","result","like","dislike","removal","is_active","count","flag","Comment","props","_data$children","_flags","flags","removal_count","like_users","dislike_users","is_reply_form_visible","handle_comment_created","handle_reply_click","window","location","post_feedback","_like_users","_dislike_users","action_like","redirect","action_dislike","useEffect","qs_tooltip","tooltipTriggerList","querySelectorAll","tooltipTriggerEl","bootstrap","Tooltip","user_avatar","submit_date","user_name","user_url","is_removed","user_moderator","permalink","key","CommentCounter","CommentFormWrapper","html_id_suffix","_id","elem","getElementById","innerHTML","UpdateAlert","diff","CommentBox","_useContext3","dispatch","load_comments","load_count","setInterval","App","initial_state","_useReducer","useReducer","_useReducer2","Provider","rootElement","ReactDOM","createRoot","StrictMode","comments_props","comments_props_override"],"mappings":"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"}