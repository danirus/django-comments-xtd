!function(e,t,n,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw l}}}}function o(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,c=[],i=!0,m=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){m=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(m)throw a}}return c}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}var f=e.createContext({state:{tree:[],cids:[],newcids:[],counter:0},dispath:function(){}}),p={comment_count:0,allow_comments:!1,current_user:"",request_name:!1,request_email_address:!1,is_authenticated:!1,who_can_post:"",allow_flagging:!1,allow_feedback:!1,show_feedback:!1,can_moderate:!1,polling_interval:2e3,feedback_url:"",delete_url:"",dislike_url:"",like_url:"",login_url:"",reply_url:"",flag_url:"",list_url:"",count_url:"",send_url:"",preview_url:"",default_form:{content_type:"",object_pk:"",timestamp:"",security_hash:""},default_followup:!1,html_ud_suffix:"",max_thread_level:-1,comment_max_length:3e3},v=e.createContext(p);function h(e,t){switch(t.type){case"CREATE_TREE":return m(m({},e),function(e,t){var n=new Array,r=new Array,a={},o={},c=new Set,i=new Set,m=new Set;function s(e){return o[e].map((function(e){return void 0===a[e].children&&(a[e].children=s(e)),a[e]}))}var u,d=l(t);try{for(d.s();!(u=d.n()).done;){var f=u.value;c.add(f.id),a[f.id]=f,0===f.level&&r.push(f.id),o[f.id]=[],f.parent_id!==f.id&&o[f.parent_id].push(f.id)}}catch(e){d.e(e)}finally{d.f()}for(var p=0,v=r;p<v.length;p++){var h=v[p];a[h].children=s(h),n.push(a[h])}if(c.size>0)if(e.size>0){var g,y=l(c);try{for(y.s();!(g=y.n()).done;){var b=g.value;e.has(b)||m.add(b),i.add(b)}}catch(e){y.e(e)}finally{y.f()}}else i=c,m=new Set;return{tree:n,cids:i,newcids:m,counter:i.size}}(e.cids,t.data));case"UPDATE_COUNTER":return m(m({},e),{},{counter:t.counter});default:return e}}function g(e){var t;if(document.cookie&&""!==document.cookie){var n,r=l(document.cookie.split(";"));try{for(r.s();!(n=r.n()).done;){var a=n.value.trim();if(a.slice(0,e.length+1)===e+"="){t=decodeURIComponent(a.slice(e.length+1));break}}}catch(e){r.e(e)}finally{r.f()}}return t}function y(t){var r=t.replyTo,a=t.message;return e.createElement("span",c({className:"form-text small invalid-feedback"},r>0&&{style:{fontSize:"0.71rem"}}),n.gettext(a))}function b(t){var a=t.avatar,l=t.name,o=t.url,c=t.comment,i=t.replyTo,m=e.useContext(v),s=m.is_authenticated,u=m.current_user;return e.createElement("div",null,e.createElement("hr",null),!i&&e.createElement("h5",{className:"text-center"},n.gettext("Your comment in preview")),e.createElement("div",{className:"comment d-flex "+(i>0?"mt-1":"mt-5")},e.createElement("img",{className:"me-3",src:a,height:"48",width:"48"}),e.createElement("div",{className:"d-flex flex-column pb-3"},e.createElement("span",{style:{fontSize:"0.8rem"}},n.gettext("Now")," - ",o.length>0?e.createElement("a",{href:o,target:"_new"},l):s?u.split(":")[1]:l,"  ",i>0&&e.createElement("div",{className:"badge badge-info"},"preview")),e.createElement("div",{className:"content py-2",dangerouslySetInnerHTML:{__html:(new r.Remarkable).render(c)}}))))}function E(t){var r,a=t.replyTo,l=t.onCommentCreated,i=e.useContext(v),u=i.comment_max_length,d=i.default_followup,f=i.default_form,p=i.is_authenticated,h=i.preview_url,E=i.request_email_address,_=i.request_name,w=i.send_url,k=s(e.useState({previewing:!1,submitted:!1,avatar:void 0,name:"",email:"",url:"",comment:"",followup:d,errors:{name:!1,email:!1,comment:!1},alert:{message:"",cssc:""},comment_field_error:""}),2),x=k[0],N=k[1],C=function(){return"Ensure this value has at most ".concat(u," ")+"character (it has ".concat(x.comment.length,").")},S=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name,a="";x.comment_field_error.length>0&&(a=C()),N(m(m({},x),{},o(o({},r,n),"comment_field_error",a)))},T=function(){var e=!0,t=!0,n="";p&&!_||(e=!/^\s*$/.test(x.name)),p&&!E||(t=!!/\S+@\S+\.\S+/.test(x.email));var r=!/^\s*$/.test(x.comment);return x.comment.length>=u&&(r=!1,n=C()),N(m(m({},x),{},{errors:m(m({},x.errors),{},{name:!e,email:!t,comment:!r}),comment_field_error:n})),e&&t&&r},j=function(e){var t="row justify-content-center form-group";return t+="followup"===e?" my-3":a>0?" my-2":" my-3",("name"===e&&x.errors.name||"email"===e&&x.errors.email||"comment"===e&&x.errors.comment)&&(t+=" has-danger"),t},F=function(e){var t="form-control";return t+=a>0?" form-control-sm":"",("name"===e&&x.errors.name||"email"===e&&x.errors.email||"comment"===e&&x.errors.comment)&&(t+=" is-invalid"),t};return e.createElement("div",null,x.previewing&&e.createElement(b,{avatar:x.avatar,name:x.name,url:x.url,comment:x.comment,replyTo:a}),e.createElement("div",{className:0===a?"card mt-4 mb-5":"card mt-2"},e.createElement("div",{className:"card-body"},0===a&&e.createElement("h4",{className:"card-title text-center pb-3"},n.gettext("Post your comment")),x.alert.message&&x.alert.message.length>0&&e.createElement("div",{className:x.alert.cssc},x.alert.message),(!x.submitted||0===a)&&e.createElement("form",{method:"POST",onSubmit:function(e){if(e.preventDefault(),T()){var t=m(m({},f),{},{honeypot:"",comment:x.comment,name:x.name,email:x.email,url:x.url,followup:x.followup,reply_to:a});fetch(w,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-CSRFToken":g("csrftoken")},body:JSON.stringify(t)}).then((function(e){if([201,202,204,403].includes(e.status)){var t,r={202:n.gettext("Your comment will be reviewed. Thank your for your patience."),204:n.gettext("Thank you, a comment confirmation request has been sent by mail."),403:n.gettext("Sorry, your comment has been rejected.")},o=(a>0?"mb-0 ":"")+"small alert alert-";t=403==e.status?o+"danger":o+"info";var c=e.status<300?{name:!1,email:!1,comment:!1}:m({},x.errors);N(m(m({},x),{},{alert:{message:r[e.status],cssc:t},previewing:!1,submitted:!0,name:"",email:"",url:"",followup:!1,comment:"",errors:c})),l()}}))}}},e.createElement("fieldset",null,e.createElement("input",{type:"hidden",name:"content_type",defaultValue:f.content_type}),e.createElement("input",{type:"hidden",name:"object_pk",defaultValue:f.object_pk}),e.createElement("input",{type:"hidden",name:"timestamp",defaultValue:f.timestamp}),e.createElement("input",{type:"hidden",name:"security_hash",defaultValue:f.security_hash}),e.createElement("input",{type:"hidden",name:"reply_to",defaultValue:a}),e.createElement("div",{style:{display:"none"}},e.createElement("input",{type:"text",name:"honeypot",defaultValue:""})),e.createElement("div",{className:j("comment")},e.createElement("div",{className:a>0?"col-12":"col-10"},e.createElement("textarea",{required:!0,name:"comment",id:"id_comment",value:x.comment,placeholder:n.gettext("Your comment"),className:F("comment"),onChange:S}),x.errors.comment&&e.createElement(y,{replyTo:a,message:x.comment_field_error||"This field is required."}))),p&&!_?e.createElement(e.Fragment,null):e.createElement("div",{className:j("name")},e.createElement("div",{className:"col-2 text-end"},e.createElement("label",{htmlFor:"id_name",className:a>0?"form-control-sm":"col-form-label"},n.gettext("Name"))),e.createElement("div",{className:a>0?"col-9":"col-7"},e.createElement("input",{required:!0,type:"text",name:"name",id:"id_name",value:x.name,placeholder:n.gettext("name"),onChange:S,className:F("name")}),x.errors.name&&e.createElement(y,{replyTo:a,message:"This field is required."}))),function(){if(p&&!E)return e.createElement(e.Fragment,null);var t="form-text small";return t+=x.errors.email?" invalid-feedback":"",e.createElement("div",{className:j("email")},e.createElement("div",{className:"col-2 text-end"},e.createElement("label",{htmlFor:"id_name",className:a>0?"form-control-sm":"col-form-label"},n.gettext("Mail"))),e.createElement("div",{className:a>0?"col-9":"col-7"},e.createElement("input",{required:!0,type:"text",name:"email",id:"id_email",value:x.email,placeholder:n.gettext("mail address"),onChange:S,className:F("email")}),e.createElement("span",c({className:t},a>0&&{style:{fontSize:"0.71rem"}}),n.gettext("Required for comment verification."))))}(),p?e.createElement(e.Fragment,null):e.createElement("div",{className:j("url")},e.createElement("div",{className:"col-2 text-end"},e.createElement("label",{htmlFor:"id_url",className:a>0?"form-control-sm":"col-form-label"},n.gettext("Link"))),e.createElement("div",{className:a>0?"col-9":"col-7"},e.createElement("input",{type:"text",name:"url",id:"id_url",value:x.url,placeholder:n.gettext("url your name links to (optional)"),onChange:S,className:F("url")}))),(r=a>0?"_".concat(a):"id_followup",e.createElement("div",{className:j("followup")},e.createElement("div",{className:a>0?"col-10":"col-7"},e.createElement("div",{className:"form-check d-flex justify-content-center align-items-center"},e.createElement("input",{name:"followup",type:"checkbox",id:r,onChange:S,className:"form-check-input",checked:x.followup}),e.createElement("label",{htmlFor:r,className:"ps-2 form-check-label"+(a>0&&" small")}," ",n.gettext("Notify me about follow-up comments"))))))),e.createElement("div",{className:"row my-2 form-group"+(a>0?" mb-0":"")},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{type:"submit",name:"post",className:"btn btn-primary me-1"+(a>0?" btn-sm":"")},n.gettext("send")),e.createElement("button",{name:"preview",className:"btn btn-secondary"+(a>0?" btn-sm":""),onClick:function(e){e.preventDefault(),T()&&fetch(h,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-CSRFToken":g("csrftoken")},body:JSON.stringify({email:x.email})}).then((function(e){if(200===e.status)return e.json();throw new Error("Status ".concat(e.status))})).then((function(e){N(m(m({},x),{},{avatar:e.url,previewing:!0}))})).catch((function(e){return console.error(e)}))}},n.gettext("preview"))))))))}function _(t){var r=t.userName,a=t.userUrl,l=t.isRemoved,o=t.userModerator,c=e.useMemo((function(){return a&&!l?e.createElement("a",{href:a,className:"text-decoration-none",title:"User's link"},r):r}),[a,l]),i=e.useMemo((function(){if(o){var t=n.gettext("moderator");return e.createElement("span",null," ",e.createElement("span",{className:"badge text-bg-secondary"},t))}return e.createElement(e.Fragment,null)}),[o]);return e.createElement("span",null,c,i)}function w(t){var r=t.allowFlagging,a=t.canModerate,l=t.commentId,o=t.deleteUrl,c=t.flagUrl,i=t.isAuthenticated,m=t.isRemoved,s=t.loginUrl,u=t.userRequestedRemoval,d=t.removalCount,f=e.useMemo((function(){if(i&&a&&d>0){var t=n.ngettext("%s user has flagged this comment as inappropriate.","%s users have flagged this comment as inappropriate.",d),r=n.interpolate(t,[d]);return e.createElement("span",{className:"small text-danger",title:r},d)}return e.createElement(e.Fragment,null)}),[i,a,d]),p=e.useMemo((function(){if(!r)return e.createElement(e.Fragment,null);var t="";if(u)return t=n.gettext("I flagged it as inappropriate"),e.createElement(e.Fragment,null,f," ",e.createElement("i",{className:"bi bi-flag text-danger",title:t}));var a=i?c.replace("0",l):s+"?next="+c.replace("0",l);return t=n.gettext("flag comment as inappropriate"),e.createElement(e.Fragment,null,f," ",e.createElement("a",{className:"text-decoration-none",href:a},e.createElement("i",{className:"bi bi-flag",title:t})))}),[r,u]),v=e.useMemo((function(){if(i&&a){var t=n.gettext("remove comment"),r=o.replace("0",l);return e.createElement("a",{className:"text-decoration-none",href:r},e.createElement("i",{className:"bi bi-trash",title:t}))}return e.createElement(e.Fragment,null)}),[i,a]);return m?e.createElement(e.Fragment,null):e.createElement("div",{className:"d-inline"},p," ",v)}function k(t){var r=t.allowFeedback,a=t.commentId,l=t.currentUser,o=t.onLikeClicked,c=t.onDislikeClicked,i=t.showFeedback,m=t.userLikeList,s=t.userDislikeList,d=l.split(":")[0],f=function(t){if(!r)return e.createElement(e.Fragment,null);var a=u(function(e){return"like"===e?m:s}(t)),l=new Set(a.map((function(e){return e.split(":")[0]}))),f=a.map((function(e){return e.split(":")[1]})),p="like"==t?o:c,v="like"==t?"hand-thumbs-up":"hand-thumbs-down",h="bi bi-"+(v+=l.has(d)?"-fill":""),g="like"==t?n.gettext("I like it"):n.gettext("I dislike it");return e.createElement(e.Fragment,null,i&&a.length>0&&e.createElement("a",{className:"small text-decoration-none","data-bs-html":"true","data-bs-toggle":"tooltip","data-bs-title":f.join("<br/>"),role:"button"},a.length),e.createElement("a",{href:"#",onClick:p},e.createElement("i",{className:h,title:g})))},p=f("like"),v=f("dislike");return r?e.createElement("div",{id:"feedback-".concat(a),className:"d-inline small"},p," ",e.createElement("span",{className:"text-muted"},"⋅")," ",v):e.createElement(e.Fragment,null)}function x(t){var r=t.allowFeedback,a=t.commentId,l=t.level,o=t.maxThreadLevel,c=t.onCommentCreated,i=t.onReplyClick,m=t.replyFormVisible,s=t.replyUrl.replace("0",a),u=n.gettext("Reply");return l>=o?e.createElement(e.Fragment,null):e.createElement(e.Fragment,null,r?e.createElement("span",null,"  ",e.createElement("span",{className:"text-muted"},"•"),"  ",e.createElement("a",{className:"small text-decoration-none",onClick:i,href:s},u)):e.createElement("a",{className:"small text-decoration-none",onClick:i,href:s},u),m?e.createElement(E,{replyTo:a,onCommentCreated:c}):e.createElement(e.Fragment,null))}function N(t){var n=t.allowFeedback,a=t.comment,l=t.isRemoved,o=e.useMemo((function(){return{__html:(new r.Remarkable).render(a)}}),[a]),c=n?"py-1":"pt-1 pb-3";if(l){var i="text-muted ".concat(c);return e.createElement("p",{className:i},e.createElement("em",null,a))}var m="content ".concat(c);return e.createElement("div",{className:m,dangerouslySetInnerHTML:o})}function C(t){var r,a=t.data,o=e.useContext(v),c=o.allow_feedback,i=o.allow_flagging,d=o.can_moderate,p=o.current_user,h=o.delete_url,y=o.dislike_url,b=o.feedback_url,E=o.flag_url,S=o.is_authenticated,T=o.like_url,j=o.login_url,F=o.max_thread_level,O=o.reply_url,R=o.show_feedback,I=o.who_can_post,P=e.useContext(f).state.newcids,A=function(e,t){var n,r={like:[],dislike:[],removal:{is_active:!1,count:0}},a=l(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,c=[o.id,o.user].join(":");switch(o.flag){case"like":r.like.push(c);break;case"dislike":r.dislike.push(c);break;case"removal":r.removal.count+=1,r.removal.is_active=c===t}}}catch(e){a.e(e)}finally{a.f()}return r}(a.flags,p),M=s(e.useState({current_user:p,removal:A.removal.is_active,removal_count:A.removal.count,like_users:A.like,dislike_users:A.dislike,is_reply_form_visible:!1}),2),U=M[0],D=M[1],L=function(e){fetch(b,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-CSRFToken":g("csrftoken")},body:JSON.stringify({comment:a.id,flag:e})}).then((function(t){var n=new Set(U.like_users),r=new Set(U.dislike_users);switch(t.status){case 201:"like"==e?(n.add(p),r.delete(p)):"dislike"==e&&(n.delete(p),r.add(p)),D(m(m({},U),{},{like_users:u(n),dislike_users:u(r)}));break;case 204:"like"==e?n.delete(p):"dislike"==e&&r.delete(p),D(m(m({},U),{},{like_users:u(n),dislike_users:u(r)}));break;case 400:t.json().then((function(e){console.error(e)}))}}))};return e.useEffect((function(){u(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}))}),[U]),e.createElement("div",{id:"c".concat(a.id),className:"comment d-flex"},e.createElement("img",{src:a.user_avatar,className:"me-3",height:"48",width:"48"}),e.createElement("div",{className:"d-flex flex-column flex-grow-1 pb-3"},e.createElement("h6",{className:"comment-header mb-1 d-flex justify-content-between",style:{fontSize:"0.8rem"}},e.createElement("div",{className:"d-inline flex-grow-1"},P.has(a.id)&&e.createElement("span",null,e.createElement("span",{className:"badge text-bg-success"},"new")," - "),a.submit_date," - ",e.createElement(_,{userName:a.user_name,userUrl:a.user_url,isRemoved:a.is_removed,userModerator:a.user_moderator}),"  ",e.createElement("a",{className:"permalink text-decoration-none",title:n.gettext("comment permalink"),href:a.permalink},"¶")),e.createElement(w,{allowFlagging:i,canModerate:d,commentId:a.id,deleteUrl:h,flagUrl:E,isAuthenticated:S,isRemoved:a.is_removed,loginUrl:j,userRequestedRemoval:U.removal,removalCount:U.removal_count})),e.createElement(N,{allowFeedback:c,comment:a.comment,isRemoved:a.is_removed}),!a.is_removed&&e.createElement("div",null,e.createElement(k,{allowFeedback:c,commentId:a.id,currentUser:p,onLikeClicked:function(e){if(e.preventDefault(),S)return L("like");var t="".concat(j,"?next=").concat(T.replace("0",a.id));return window.location.href=t},onDislikeClicked:function(e){if(e.preventDefault(),S)return L("dislike");var t="".concat(j,"?next=").concat(y.replace("0",a.id));return window.location.href=t},showFeedback:R,userLikeList:U.like_users,userDislikeList:U.dislike_users}),e.createElement(x,{allowFeedback:c,commentId:a.id,level:a.level,maxThreadLevel:F,onCommentCreated:function(){t.onCommentCreated(),S&&D(m(m({},U),{},{is_reply_form_visible:!1}))},onReplyClick:function(e){if(e.preventDefault(),"users"===I&&!S)return window.location.href="".concat(j,"?next=").concat(O.replace("0",a.id));D(m(m({},U),{},{is_reply_form_visible:!U.is_reply_form_visible}))},replyFormVisible:U.is_reply_form_visible,replyUrl:O})),a.children.length>0&&e.createElement("div",{className:"pt-3"},null===(r=a.children)||void 0===r?void 0:r.map((function(n){return e.createElement(C,{key:n.id,data:n,onCommentCreated:t.onCommentCreated})})))))}function S(t){var r=t.counter,a=e.useMemo((function(){var e=n.ngettext("%s comment.","%s comments.",r);return n.interpolate(e,[r])}),[r]);return r>0?e.createElement("h5",{className:"text-center"},a):e.createElement(e.Fragment,null)}function T(t){var r=t.replyTo,a=t.onCommentCreated,l=e.useContext(v),o=l.allow_comments,c=l.who_can_post,i=l.is_authenticated,m=l.html_id_suffix;if(o){if("all"===c||"users"===c&&i)return e.createElement(E,{replyTo:r,onCommentCreated:a});var s="only-users-can-post-".concat(m),u=document.getElementById(s);return u?e.createElement("div",{dangerouslySetInnerHTML:{__html:u.innerHTML}}):e.createElement("h5",{className:"mt-4 mb-5 text-center text-info"},n.gettext("Only registered users can post comments."))}return e.createElement("h4",{className:"mt-4 mb-5 text-center text-secondary"},n.gettext("Comments are disabled for this article."))}function j(t){var r=t.counter,a=t.cids,l=t.onClick,o=r-a.size;if(o>0){var c=n.ngettext("There is %s new comment.","There are %s new comments.",o),i=n.interpolate(c,[o]);return e.createElement("div",{className:"alert alert-info d-flex justify-content-between align-items-center"},e.createElement("p",{className:"mb-0"},i),e.createElement("button",{type:"button",className:"btn btn-secondary btn-xs",onClick:function(){return l()}},"update"))}return e.createElement(e.Fragment,null)}function F(){var t=e.useContext(v),n=t.count_url,r=t.list_url,a=t.polling_interval,l=e.useContext(f),o=l.state,c=l.dispatch,i=o.counter,m=o.cids,s=o.tree,u=function(){fetch(r).then((function(e){return e.json()})).then((function(e){c({type:"CREATE_TREE",data:e})})).catch((function(e){return console.error(e)}))},d=function(){fetch(n).then((function(e){return e.json()})).then((function(e){c({type:"UPDATE_COUNTER",counter:e.count})})).catch((function(e){return console.error(e)}))};return e.useEffect((function(){a>0&&setInterval(d,a),u()}),[a]),e.createElement("div",null,e.createElement(S,{counter:i}),e.createElement(T,{replyTo:0,onCommentCreated:u}),e.createElement(j,{counter:i,cids:m,onClick:u}),e.createElement("div",{className:"comment-tree"},s.map((function(t){return e.createElement(C,{key:t.id,data:t,onCommentCreated:u})}))))}function O(t){var n={tree:[],cids:new Set,newcids:new Set,counter:t.comment_count},r=s(e.useReducer(h,n),2),a=r[0],l=r[1];return e.createElement(f.Provider,{value:{state:a,dispatch:l}},e.createElement(v.Provider,{value:t},e.createElement(F,null)))}var R=document.getElementById("comments");if(!R)throw new Error('Failed to find the element with id="comments".');t.createRoot(R).render(e.createElement(e.StrictMode,null,e.createElement(O,m(m({},window.comments_props),window.comments_props_override))))}(React,ReactDOM,django,remarkable);